<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <script>
      (function () {
        var t = localStorage.getItem("zenThemeCache") || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
        document.documentElement.setAttribute("data-theme", t);
        var c = localStorage.getItem("zenBgColorCache_" + t);
        if (c) document.documentElement.style.setProperty("--zen-paper", c);
      })();
    </script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Vollkorn:ital,wght@0,400..900;1,400..900&display=swap"
      rel="stylesheet"
    />

    <link rel="icon" type="image/png" href="../icons/favicon-128x128.png" />
  </head>
  <body>
    <div class="container">
      <h1 class="welcome-text" id="welcome">
        welcome to<br />
        a <span class="accent">calmer</span> internet
      </h1>

      <div class="search-container">
        <input
          type="text"
          class="search-input"
          placeholder="Search the web..."
          id="searchInput"
          autofocus
        />
      </div>

      <div class="shortcuts-container">
        <div class="edit-mode-banner" id="editModeBanner">
          <span>
            <img src="../icons/edit.svg" alt="Edit" /> Edit Mode - Click on a
            shortcut to edit or on ✕ to delete</span
          >
          <button class="done-editing-btn" id="doneEditingBtn">Done</button>
        </div>
        <div class="shortcuts-grid" id="shortcutsGrid">
          <!-- Shortcuts will be added here dynamically -->
        </div>
      </div>
    </div>

    <div class="config-buttons">
      <button class="settings-btn" id="settingsBtn" title="Settings">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.65 3L9.93163 3.53449L9.32754 5.54812L7.47651 4.55141L6.5906 4.68143L4.68141 6.59062L4.55139 7.47652L5.5481 9.32755L3.53449 9.93163L3 10.65V13.35L3.53449 14.0684L5.54811 14.6725L4.55142 16.5235L4.68144 17.4094L6.59063 19.3186L7.47653 19.4486L9.32754 18.4519L9.93163 20.4655L10.65 21H13.35L14.0684 20.4655L14.6725 18.4519L16.5235 19.4486L17.4094 19.3185L19.3186 17.4094L19.4486 16.5235L18.4519 14.6724L20.4655 14.0684L21 13.35V10.65L20.4655 9.93163L18.4519 9.32754L19.4486 7.47654L19.3186 6.59063L17.4094 4.68144L16.5235 4.55142L14.6725 5.54812L14.0684 3.53449L13.35 3H10.65ZM10.4692 6.96284L11.208 4.5H12.792L13.5308 6.96284L13.8753 7.0946C13.9654 7.12908 14.0543 7.16597 14.142 7.2052L14.4789 7.35598L16.7433 6.13668L17.8633 7.25671L16.644 9.52111L16.7948 9.85803C16.834 9.9457 16.8709 10.0346 16.9054 10.1247L17.0372 10.4692L19.5 11.208V12.792L17.0372 13.5308L16.9054 13.8753C16.8709 13.9654 16.834 14.0543 16.7948 14.1419L16.644 14.4789L17.8633 16.7433L16.7433 17.8633L14.4789 16.644L14.142 16.7948C14.0543 16.834 13.9654 16.8709 13.8753 16.9054L13.5308 17.0372L12.792 19.5H11.208L10.4692 17.0372L10.1247 16.9054C10.0346 16.8709 9.94569 16.834 9.85803 16.7948L9.52111 16.644L7.25671 17.8633L6.13668 16.7433L7.35597 14.4789L7.2052 14.142C7.16597 14.0543 7.12908 13.9654 7.0946 13.8753L6.96284 13.5308L4.5 12.792L4.5 11.208L6.96284 10.4692L7.0946 10.1247C7.12907 10.0346 7.16596 9.94571 7.20519 9.85805L7.35596 9.52113L6.13666 7.2567L7.25668 6.13667L9.5211 7.35598L9.85803 7.2052C9.9457 7.16597 10.0346 7.12908 10.1247 7.0946L10.4692 6.96284ZM14.25 12C14.25 13.2426 13.2426 14.25 12 14.25C10.7574 14.25 9.75 13.2426 9.75 12C9.75 10.7574 10.7574 9.75 12 9.75C13.2426 9.75 14.25 10.7574 14.25 12ZM15.75 12C15.75 14.0711 14.0711 15.75 12 15.75C9.92893 15.75 8.25 14.0711 8.25 12C8.25 9.92893 9.92893 8.25 12 8.25C14.0711 8.25 15.75 9.92893 15.75 12Z" fill="currentColor"/>
        </svg>
      </button>
    </div>

    <!-- Modal for adding shortcuts -->
    <div class="modal" id="addShortcutModal">
      <div class="modal-content">
        <h2 class="modal-title">Add Shortcut</h2>
        <input
          type="text"
          class="modal-input"
          id="shortcutName"
          placeholder="Name (e.g., GitHub)"
        />
        <input
          type="text"
          class="modal-input"
          id="shortcutUrl"
          placeholder="URL (e.g., https://github.com)"
        />
        <div class="modal-buttons">
          <button class="modal-btn" id="cancelBtn">Cancel</button>
          <button class="modal-btn primary" id="saveBtn">Save</button>
        </div>
      </div>
    </div>

    <!-- Modal for editing a shortcut -->
    <div class="modal" id="editShortcutModal">
      <div class="modal-content">
        <h2 class="modal-title">Edit Shortcut</h2>
        <input
          type="text"
          class="modal-input"
          id="editShortcutName"
          placeholder="Name (e.g., GitHub)"
        />
        <input
          type="text"
          class="modal-input"
          id="editShortcutUrl"
          placeholder="URL (e.g., https://github.com)"
        />
        <div class="modal-buttons">
          <button class="modal-btn" id="cancelEditBtn">Cancel</button>
          <button class="modal-btn primary" id="saveEditBtn">Save</button>
        </div>
      </div>
    </div>

    <!-- Modal for search engine settings -->
    <div class="modal" id="searchSettingsModal">
      <div class="modal-content modal-large">
        <h2 class="modal-title">Settings</h2>

        <div class="settings-section">
          <h3 class="settings-subtitle">Appearance</h3>
          <div class="theme-selector">
            <button class="theme-option" data-theme="dark">Dark</button>
            <button class="theme-option" data-theme="light">Light</button>
            <button class="theme-option" data-theme="system">System</button>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-subtitle">Shortcuts</h3>
          <button
            class="modal-btn primary"
            id="editShortcutsBtn"
            style="width: 100%; margin-bottom: 0.6rem"
          >
            Edit Shortcuts
          </button>
          <p class="shortcut-hint">Hover a shortcut, then press <kbd>E</kbd> to edit</p>
        </div>

        <div class="settings-section">
          <h3
            class="settings-subtitle"
            id="backgroundHeader"
            style="
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: space-between;
            "
          >
            <div>
              <img
                src="../icons/wallpaper.svg"
                alt="Wallpaper"
                style="
                  width: 20px;
                  height: 20px;
                  vertical-align: middle;
                  margin-right: 0.5rem;
                "
              />
              Background
            </div>
            <img id="backgroundToggle" src="../icons/arrow.svg" />
          </h3>

          <!-- Collapsible Background Content -->
          <div id="backgroundContent" style="display: block">
            <!-- Tab Navigation -->
            <div class="background-tabs" style="margin-top: 1rem">
              <button class="tab-btn active" id="colorTab" data-tab="color">
                Color
              </button>
              <button class="tab-btn" id="imageTab" data-tab="image">
                Image
              </button>
            </div>

            <!-- Tab Content Container -->
            <div class="tab-content-container">
              <!-- Color Tab Content -->
              <div class="tab-content active" id="colorTabContent">
                <div style="margin-top: 1rem">
                  <label class="settings-label" style="margin-bottom: 0.75rem">
                    <span>Background color per theme:</span>
                  </label>
                  <div class="theme-color-grid">
                    <div class="theme-color-item">
                      <div
                        class="theme-color-swatch"
                        id="darkColorSwatch"
                        style="background-color: #1f1f1f"
                      >
                        <input
                          type="color"
                          id="wallpaperColorDark"
                          value="#1f1f1f"
                        />
                      </div>
                      <span class="theme-color-label">dark</span>
                    </div>
                    <div class="theme-color-item">
                      <div
                        class="theme-color-swatch"
                        id="lightColorSwatch"
                        style="background-color: #f5f3ec"
                      >
                        <input
                          type="color"
                          id="wallpaperColorLight"
                          value="#f5f3ec"
                        />
                      </div>
                      <span class="theme-color-label">light</span>
                    </div>
                  </div>
                  <button
                    class="modal-btn primary"
                    id="applyColorBtn"
                    style="width: 100%; margin: 0.75rem 0 0"
                  >
                    Apply Colors
                  </button>
                </div>
              </div>

              <!-- Image Tab Content -->
              <div class="tab-content" id="imageTabContent">
                <!-- Live Preview -->
                <div class="wallpaper-live-preview" id="wallpaperLivePreview" style="margin-top: 1rem">
                  <div class="preview-background" id="previewBackground">
                    <div class="preview-content" id="previewContent">
                      <span class="preview-label">Live Preview</span>
                    </div>
                  </div>
                </div>

                <!-- Drag and Drop Area -->
                <div
                  class="drag-drop-area"
                  id="dragDropArea"
                  style="margin-top: 1rem"
                >
                  <img
                    src="../icons/wallpaper.svg"
                    alt="Upload"
                    class="drag-drop-icon"
                  />
                  <p class="drag-drop-text">Drag & drop an image here</p>
                  <p class="drag-drop-subtext">or</p>
                </div>

                <!-- Image Source Buttons -->
                <div style="margin-top: 0.75rem">
                  <input
                    type="file"
                    id="wallpaperUpload"
                    accept="image/png,image/jpeg,image/jpg"
                    style="display: none"
                  />
                  <div
                    style="display: flex; gap: 0.5rem; margin-bottom: 0.75rem"
                  >
                    <button
                      class="modal-btn"
                      id="wallpaperUploadBtn"
                      style="flex: 1; margin: 0"
                    >
                      Browse Files
                    </button>
                    <button
                      class="modal-btn primary"
                      id="bingImageBtn"
                      style="flex: 1; margin: 0"
                    >
                      Bing Image
                    </button>
                  </div>
                </div>

                <!-- Effects Controls (Hidden by default) -->
                <div
                  id="effectsControls"
                  style="margin-top: 1rem; display: none"
                >
                  <span
                    style="
                      display: block;
                      margin-bottom: 1rem;
                      color: rgba(var(--zen-dark-rgb), 0.7);
                      font-size: 0.9rem;
                    "
                    >Effects</span
                  >

                  <div class="slider-group">
                    <label class="slider-label"
                      >Opacity: <span id="opacityValue">50</span>%</label
                    >
                    <input
                      type="range"
                      id="wallpaperOpacity"
                      min="0"
                      max="100"
                      value="50"
                      class="settings-slider"
                    />
                  </div>

                  <div class="slider-group">
                    <label class="slider-label"
                      >Blur: <span id="blurValue">0</span>px</label
                    >
                    <input
                      type="range"
                      id="wallpaperBlur"
                      min="0"
                      max="20"
                      value="0"
                      class="settings-slider"
                    />
                  </div>

                  <div class="slider-group">
                    <label class="slider-label"
                      >Grain: <span id="grainValue">0</span>%</label
                    >
                    <input
                      type="range"
                      id="wallpaperGrain"
                      min="0"
                      max="100"
                      value="0"
                      class="settings-slider"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem">
              <button
                class="modal-btn"
                id="removeWallpaperBtn"
                style="
                  flex: 1;
                  background: rgba(247, 111, 83, 0.2);
                  color: var(--accent-color);
                  margin: 0;
                  display: none;
                "
              >
                Clear Background
              </button>
              <button
                class="modal-btn"
                id="resetAllBtn"
                style="
                  flex: 1;
                  background: rgba(var(--zen-dark-rgb), 0.1);
                  color: var(--zen-dark);
                  margin: 0;
                "
              >
                ↺ Reset All
              </button>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-subtitle">Search Engine</h3>
          <label class="settings-label">
            <input
              type="checkbox"
              id="showLogoCheckbox"
              class="settings-checkbox"
            />
            <span>Show search engine logo</span>
          </label>
        </div>

        <div class="settings-section" style="margin-top: 1.5rem">
          <h3 class="settings-subtitle">Popular Search Engines</h3>
          <div class="search-engines-grid">
            <button class="engine-option" data-engine="google">
              <img src="https://www.google.com/favicon.ico" alt="Google" />
              <span>Google</span>
            </button>
            <button class="engine-option" data-engine="duckduckgo">
              <img src="https://duckduckgo.com/favicon.ico" alt="DuckDuckGo" />
              <span>DuckDuckGo</span>
            </button>
            <button class="engine-option" data-engine="bing">
              <img src="https://www.bing.com/favicon.ico" alt="Bing" />
              <span>Bing</span>
            </button>
            <button class="engine-option" data-engine="yahoo">
              <img src="https://www.yahoo.com/favicon.ico" alt="Yahoo" />
              <span>Yahoo</span>
            </button>
            <button class="engine-option" data-engine="brave">
              <img
                src="https://brave.com/static-assets/images/brave-favicon.png"
                alt="Brave"
              />
              <span>Brave</span>
            </button>
            <button class="engine-option" data-engine="ecosia">
              <img src="https://www.ecosia.org/favicon.ico" alt="Ecosia" />
              <span>Ecosia</span>
            </button>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-subtitle">Custom Search Engine</h3>
          <input
            type="text"
            class="modal-input"
            id="customEngineName"
            placeholder="Engine name (e.g., My Search)"
          />
          <input
            type="text"
            class="modal-input"
            id="customEngineUrl"
            placeholder="Search URL (use %s for query, e.g., https://example.com/search?q=%s)"
          />
          <input
            type="text"
            class="modal-input"
            id="customEngineFavicon"
            placeholder="Favicon URL (optional)"
          />
          <button class="modal-btn" id="setCustomEngineBtn">
            Set Custom Engine
          </button>
        </div>

        <div class="modal-buttons">
          <button class="modal-btn" id="closeSettingsBtn">Close</button>
        </div>
      </div>
    </div>

    <script src="search.js"></script>
    <script src="greetings.js"></script>
    <script src="shortcuts.js"></script>
    <script src="index.js"></script>
  </body>
</html>
